<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link rel="stylesheet" href="../resources/css/reset.css" />
    <link rel="stylesheet" href="../resources/css/style.css" />
    <link rel="shortcut icon" href="../resources/images/favicon.ico" type="image/x-icon" />
    <link rel="icon" href="../resources/images/favicon.ico" type="image/x-icon" />
    <script src="../resources/js/jquery.min.js"></script>
    <script src="../resources/js/ui.js"></script>
    <title>하나은행 퇴직연금 안내장</title>
  </head>

  <body>
    <main class="main-wrapper">
      <header class="header">
        <div class="header-wrap">
          <h1>header</h1>
          <nav>
            <ul>
              <li><a href="#article1">menu1</a></li>
              <li><a href="#article2">menu22</a></li>
              <li><a href="#article3">menu333</a></li>
              <li><a href="#article4">menu44</a></li>
              <li><a href="#article5">menu5555</a></li>
              <!-- <li>menu 666 666</li>
              <li>menu 7</li>
              <li>menu 88</li>
              <li>menu 999</li>
              -->
              <li>blank</li>
            </ul>
          </nav>
        </div>
      </header>
      
      <div class="contents-wrap">
        <article class="article" id="article1" style="height: 600px;">
          article 111
          <div class="cards" id="accSample" style="border: 5px solid green;">
            <div class="card-group">
              <div class="card-panel"></div>
              <button type="button" class="card-header">상세보기</button>
            </div>
            <div class="card-group">
              <div class="card-panel"></div>
              <button type="button" class="card-header">상세보기</button>
            </div>
            <div class="card-group">
              <div class="card-panel"></div>
              <button type="button" class="card-header">상세보기</button>
            </div>
          </div>    
        </article>
        <article class="article" id="article2">
          article 222
          <div class="nav-tabs" id="myTab">
            <ul class="tabs-list"  role="tablist">
              <li class="tabs-item" role="presentation">
                <button type="button" class="tabs-link">Home</button>
              </li>
              <li class="tabs-item" role="presentation">
                <button type="button" class="tabs-link">Profile</button>
              </li>
              <li class="tabs-item" role="presentation">
                <button type="button" class="tabs-link">Contact</button>
              </li>
              <li class="tabs-item" role="presentation">
                <button type="button" class="tabs-link">Contact11</button>
              </li>
            </ul>
            보유상품
            <span class="checkbox">
              <input type="checkbox" id="checkbox1" />
              <label for="checkbox1">간편보기</label>                
            </span>
            <div class="tabs-contents" id="cont1">
              <div class="tabs-panel">                
                <div class="cards" id="card1" style="border: 5px solid pink">
                  
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                </div>  
                      
              </div>
              <div class="tabs-panel">
                <div class="cards" id="card2" style="border: 5px solid purple">
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                </div>  
              </div>
              <div class="tabs-panel">
                <div class="cards" id="card3" style="border: 5px solid yellowgreen">
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                </div>  
              </div>
              <div class="tabs-panel">
                <div class="cards" id="card4" style="border: 5px solid hotpink">
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                  <div class="card-group">
                    <div class="card-panel"></div>
                    <button type="button" class="card-header">상세보기</button>
                  </div>
                </div>  
              </div>
            </div>
          </div>
        </article>
        <article class="article" id="article3" style="background-color: aquamarine;">
          article 333
        </article>
        <article class="article" id="article4" style="background-color: blue;">
          article 444
        </article>
        <article class="article" id="article5">
          article 555
          
            
        </div>
        </article>
        
     
      <footer class="footer">footer</footer>
    </main>
    <aside>aside</aside>
    <div class="modal-container"></div>
    <div class="modal-dimmed"></div>
    <script></script>
  </body>
</html>
<script>

  // init 이벤트
  let navActive = 5; // 상단 nav 활성화 index
  let tabActive = 0; // 탭메뉴 활성화 index
  NavMenu(navActive);
  moveContents(navActive);
  $("#myTab").Tabs(tabActive);

  // 카드 아코디언 생성(동적으로 발생시 ajax 호출 이후에 발생)
  const cards1 = $("#card1").AccordionScroll();
  const cards2 = $("#card2").AccordionScroll();
  const cards3 = $("#card3").AccordionScroll();
  const cards4 = $("#card4").AccordionScroll();
  const accSample = $("#accSample").Accordion();

  // nav menu handler
  $("nav a").click(function(e) {
    
    e.preventDefault();
    const idx = $(this).closest('li').index() + 1;
    var state = '';
    if(navActive > idx) {
      //$('body').addClass("nav-back");
      state = 'scroll-up'
    }  
    // 링크 여백용 li는 이벤트 제외
    if(idx === $(this).index().length + 1) return;

    navActive = idx;    
    NavMenu(navActive);
    moveContents(navActive, state);
   

  });
  // tab menu handler
  $(".tabs-link").click(function() {
    tabActive = $(this).data("active");
    num = 0;
    $("#checkbox1").prop("checked", false);
    cards1.hide(-1);
    cards2.hide(-1);
    cards3.hide(-1);
    cards4.hide(-1);
			
  });
  //footer menu click event handler
  $("footer").click(function() {
    $(this).toggleClass("active");
  });

  // 상세보기 active num
  let num = 0;
  // 간편보기 checkbox value
  let isAll = $("#checkbox1").is("checked");
  // 상세보기 버튼 공통 이벤트
  function moreView(isActive, length){
    if(isActive) {
      num++;      
      console.log(num)
    } else {
      if(num > 0) num--;
    }
    console.log(isActive, num , length)
    if(num === $("#card1 .card-header").length){
      $("#checkbox1").prop("checked", true);
    } else {
      $("#checkbox1").prop("checked", false);
    }
  }
  $("#cont1 .card-header").on('click', function() {
    const isActive = $(this).hasClass('active');
    const thisLength = $(this).closest(".cards").find(".card-group").length;
    moreView(isActive, thisLength);
   
  });
  
  // 간편보기 checkbox handler
  $("#checkbox1").on("change", function(){
    isAll = $(this).prop("checked");
    console.log("isAll", isAll,  $(this).prop("checked"));
    if(isAll) {
      num =  $(".tabs-panel").eq(tabActive).find(".card-header").length;
      cards1.show(-1);
      cards2.show(-1);
      cards3.show(-1);
      cards4.show(-1);

    } else {
      num =  0;
      cards1.hide(-1);
      cards2.hide(-1);
      cards3.hide(-1);
      cards4.hide(-1);

    }
  });



</script>
